extern crate expression_parser;

mod setup;

#[test]
fn integer_overflow_1() {
    let num = setup::setup_basic_config().parse(&"9223372036854775807 + 1");
    assert!(num.is_err());
}

#[test]
fn integer_overflow_2() {
    let num = setup::setup_basic_config().parse(&"100000 ^ 4");
    assert!(num.is_err());
}

#[test]
fn max_float() {
    let num = setup::setup_floats_config().parse(&"179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
    assert_eq!(Ok(179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f64), num);
}

#[test]
fn float_overflow() {
    let num = setup::setup_floats_config().parse(&"179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 * 2");
    assert!(num.is_ok());
    assert!(f64::is_infinite(num.unwrap()));
}